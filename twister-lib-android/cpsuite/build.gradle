plugins {
	id("net.twisterrob.libraries.android.library")
}

dependencies {
	implementation ("io.takari.junit:takari-cpsuite:1.2.7") {
		exclude group: 'junit'
	}
	implementation "junit:junit:${VERSION_JUNIT}"
	implementation "androidx.test:runner:${VERSION_ESPRESSO_RUNNER}"
	implementation "androidx.test.ext:junit:${VERSION_ESPRESSO_JUNIT}"
}

dependencies.components {
	withModule("io.takari.junit:takari-cpsuite") {
		withVariant("runtime") { variant ->
			def field = org.gradle.api.internal.artifacts.repositories.resolver.VariantMetadataAdapter.class.getDeclaredField("metadata")
			field.setAccessible(true)
			def metadata = field.get(variant) as org.gradle.internal.component.external.model.maven.DefaultMutableMavenModuleResolveMetadata
			metadata.setPackaging("jar")
		}
	}
}
